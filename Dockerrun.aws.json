{
    "AWSEBDockerrunVersion": 2,
        "containerDefinitions": [
            {
                "command": [
                    "/bin/sh",
                    "-c",
                    "python manage.py migrate && gunicorn cowry.wsgi:application --bind 0.0.0.0:8009"
                ],
                "essential": true,
                "image":"texplode/esusu_api",
                "memory": 128,
                "mountPoints": [
                    {
                        "containerPath": "/var/www/app/",
                        "sourceVolume": "_App"
                    }
                ],
                
                "name": "api"
                
            },
            {
                "essential": true,
                "image": "postgres:alpine",
                "memory": 128,
                "mountPoints": [
                    {
                        "containerPath": "/var/lib/postgresql/data/",
                        "sourceVolume": "Db_Data"
                    }
                ],
                "name": "db"
            },
            {
                "essential": true,
                "image":"texplode/nginx",
                "memory": 128,
                "mountPoints": [
                    {
                        "containerPath": "/var/www/app/static",
                        "sourceVolume": "_AppStatic"
                    },
                    {
                        "containerPath": "/var/www/app/media",
                        "sourceVolume": "_AppMedia"
                    }
                ],
                "name": "nginx",
                "portMappings": [
                    {
                        "containerPort": 80,
                        "hostPort": 8009
                    }
                ]
            },
            {
                "essential": true,
                "image": "redis:latest",
                "name": "redis",
                "memory": 128,
                "portMappings": [
                    {
                        "containerPort": 6379,
                        "hostPort": 6379
                    }
                ]
            },
            {
                "essential": true,
                "image":"texplode/esusu_smtp",
                "name": "smtp",
                "memory": 128,
                "portMappings": [
                    {
                        "containerPort": 25,
                        "hostPort": 25
                    }
                ]
            }
        ],
        "family": "",
        "volumes": [
            {
                "host": {
                    "sourcePath": "db_data"
                },
                "name": "Db_Data"
            },
            {
                "host": {
                    "sourcePath": "app_api"
                },
                "name": "_App"
            },
            {
                "host": {
                    "sourcePath": "app_api/static"
                },
                "name": "_AppStatic"
            },
            {
                "host": {
                    "sourcePath": "app_api/media"
                },
                "name": "_AppMedia"
            }
        ]
    }


